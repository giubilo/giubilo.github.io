<!DOCTYPE html>
  
  
 <html lang="en">   
<head>

	    <title>CMIS Workbench</title>

    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="giubilo.org">
    <meta name="author" content="">

    
    <link rel="shortcut icon" href="/favicon.ico">

    
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">

    
        <link rel="stylesheet" href="/assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.min.css">


        
    <link rel="stylesheet" href="/assets/css/pages/page_job.css">


	        
    <link rel="stylesheet" href="/assets/css/themes/default.css" id="style_color">

    
    <link rel="stylesheet" href="/assets/css/custom.css">


</head>
<body class="header-fixed">

<div class="wrapper">

    <div class="header">
		        <div class="topbar">
            <div class="container">
                
                <ul class="loginbar pull-right">
                    <li>
                        <i class="fa fa-globe"></i>
                        <a>Languages</a>
                        <ul class="lenguages">
                            <li class="active">
                                <a href="#">English <i class="fa fa-check"></i></a> 
                            </li>
                        </ul>
                    </li>
                    <li class="topbar-devider"></li>   
                    <li><a href="faq.html">Help</a></li>  
                </ul>
                
            </div>
        </div>

		        <div class="navbar navbar-default" role="navigation">
            <div class="container">
                
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="fa fa-bars"></span>
                    </button>
                    <a class="navbar-brand" href="/">
                        <img id="logo-header" src="/assets/img/logo1-default.png" alt="Logo">
                    </a>
                </div>

                
                <div class="collapse navbar-collapse navbar-responsive-collapse">
                    <ul class="nav navbar-nav">
                        
                        <li class="navbar-link"><a class="glyphicon glyphicon-home" href="/"></a></li>
                        

                        
                        <li class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                                Concepts
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/concepts/overview"><i class="fa fa-cogs"></i> Overview</a></li>
                                <li><a href="/concepts"><i class="fa  fa-map-marker"></i> Roadmap</a></li>
                            </ul>
                        </li>

                                                
                        <li class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                                Retrospectives
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/retrospectives/"><i class="fa fa-cubes"></i> Topic Summary</a></li>
                                <li><a href="faq.html"><i class="fa fa-question-circle"></i> Frequently Asked</a></li>
                            </ul>
                        </li>

                        
                        <li class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                                Community
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/community/gettinginvolved"><i class="fa fa-star"></i> Getting Involved</a></li>
                                <li><a href="http://stackoverflow.com/questions/tagged/giubilo" target="_blank"><i class="fa fa-stack-overflow"></i> StackOverflow</a></li>
                                <li><a href="/community/adopters"><i class="fa fa-users"></i> Adopters</a></li>
                                <li><a href="/community/relatedprojects"><i class="fa fa-link"></i> Related Projects</a></li>
                            </ul>
                        </li>                    

                        
                        <li class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                                Blog
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/blog/news"><i class="fa fa-rss"></i> Current News</a></li>
                                <li><a href="/blog/pov"><i class="fa fa-compass"></i> Points of View</a></li>
                            </ul>
                        </li>

                        
                        <li class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                                About
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/about/start"><i class="fa fa-circle-o-notch"></i> Start Here</a></li>
                                <li><a href="/about/motivation"><i class="fa fa-lightbulb-o"></i> Motivation</a></li>
                                <li><a href="/about/contacts"><i class="fa fa-user"></i> Contacts</a></li>
                                <li><a href="/about/serviceterms"><i class="fa fa-gavel"></i> Terms of Service</a></li>
                            </ul>
                        </li>                    

                        
                        <li>
                            <i class="search fa fa-search search-btn"></i>
                            <div class="search-open">
                                <div class="input-group animated fadeInDown">
                                    <input type="text" class="form-control" placeholder="Search">
                                    <span class="input-group-btn">
                                        <button class="btn-u" type="button">Go</button>
                                    </span>
                                </div>
                            </div>    
                        </li>
                        
                    </ul>
                </div>
            </div>    
        </div>            

    </div>

	
<div class="breadcrumbs">
    <div class="container">
        <h1 class="pull-left">CMIS Workbench</h1>
        <ul class="pull-right breadcrumb">
            <li><a href="/">Home</a></li>
            <li><a href="/retrospectives">Retrospectives</a></li>
            <li class="active">CMIS Workbench</li>
        </ul>
    </div>
</div>

   
    <div class="container">
        <div class="row margin-top-30">
            <div class="col-md-12">					
                <p>

<p><html>
<table border="0">
<tr>
  <td>
    <p>
      <img src="./images/paint-by-numbers.png?raw=true" alt="book">
    </p>
  </td>
  <td>
    <p>This paint by numbers has used:</p>
    <p><b>Alfresco 4.2</b></p>
    <p><b>CMIS Workbench 0.9.0-beta-1 &amp; 0.10.0</b></p>
  </td>
</tr>
</table>
</html></p>

<p>The <a href="http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html">CMIS Workbench</a> is a desktop (osx, win, linux) repository browser and development tool for working with the OpenCMIS client API (there&rsquo;s an <a href="http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html">introductory video</a> that provides a simple overview).</p>

<p>Things it&rsquo;s being used on Allegria for include:
* quickly prototyping and checking content types and properties
* working out syntax for cmis queries
* running quick scripts for changing objects in the repositories</p>

<p>The OpenCMIS API it uses, is an open source implementation of the <a href="http://docs.oasis-open.org/cmis/CMIS/v1.1/CMIS-v1.1.pdf">Content Management Interoperability Services (CMIS) specification</a> provided by the <a href="http://chemistry.apache.org" title="target=_blank">Apache Chemistry project</a>.  The CMIS Workbench is also one of the tools from the apache project:</p>

<p><img src="/assets/img/chemistry_tm_logo_small.png?raw=true" alt="logo" />
<br />
<img src="/assets/img/apache-chemistry.png?raw=true" alt="img" />
</p>

<p>Alfresco being a cmis-compliant rich content repository, means that it provides a set of [[services for working with objects|Helicopter view: CMIS]] defined by the specification (which are then wrapped in the OpenCMIS implementation that a client like the CMIS Workbench can use).  With CMIS, most capabilities of the Alfresco repository are accessible and for the rest there are [[other interfaces|Helicopter view: Alfresco integration]] available.</p>

<p>Florian Muller, Jay Brown and Jeff Potts have written <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a>, which they describe as a hands on experience with the [cmis] standard and with the Apache Chemistry libraries and tools [including CMIS Workbench].  In a very similar vein to Allegria, the focus of the book is on:
&gt;
getting a good general understanding of CMIS, enough to build a useful (and we hope fun) application<br />
&gt;</p>

<p>This paint-by-numbers is not to redo the work inside their book but does summarise some of the key aspects of the CMIS Workbench, in particular using it with an Alfresco repository.</p>

<h2 id="toc_0">Steps</h2>

<ol>
<li>Get CMIS Workbench</li>
<li>Connecting the workbench to repositories</li>
<li>Browsing objects in the repository</li>
<li>Querying the repository</li>
<li>CMIS Types</li>
<li>The groovy console</li>
<li>Advanced features</li>
</ol>

<h3 id="toc_1">1. Get CMIS Workbench</h3>

<p>The CMIS Workbench can be <a href="http://www.apache.org/dyn/closer.cgi/chemistry/opencmis/0.10.0/chemistry-opencmis-workbench-0.10.0-full.zip">downloaded</a> as a zip from the <a href="http://chemistry.apache.org">Apache Chemistry project</a>.</p>

<p>Florian Muller has also created a <a href="https://github.com/fmui/ApacheChemistryInAction">GitHub Repository</a> for readers of <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a> which contains; a zip of the CMIS Workbench, an in-memory cmis compliant repository (another one of the apache project&rsquo;s tools) and the source code for each chapter&rsquo;s examples.  To use the ApacheChemistryInAction GitHub repository, fork it and import it to Eclipse eGit as per the paint-by-numbers directions for [[GitHub|Paint by numbers: GitHub]]<img src="/assets/img/paint-by-numbers-10.png?raw=true" alt="icon" />
 and the ones for [[Eclipse|Paint by numbers: Eclipse]]<img src="/assets/img/paint-by-numbers-10.png?raw=true" alt="icon" />
.</p>

<p>Unzip the chemistry-opencmis-workbench-0.10.0-full.zip.  Using a linux or osx terminal type:</p>

<pre><code>cd [directory where extracted workbench to]
./workbench.sh
</code></pre>

<p><strong>Note:</strong> the workbench.sh file from Florian&rsquo;s GitHub repo is tailored to use the apache in-memory repository.  To use the CMIS Workbench with Alfresco it is better to also get the one from the ApacheProject (so rename Florian&rsquo;s to something like <code>workbench.in-memory.sh</code>).</p>

<p>To have a neater installation and run it from the osx launchpad or dock follow this [[paint-by-numbers|Paint by numbers: Launching osx scripts]]<img src="/assets/img/paint-by-numbers-10.png?raw=true" alt="icon" />
.</p>

<h3 id="toc_2">2. Connecting the workbench</h3>

<p>The connection window will appear either when starting the application or using the &lsquo;Connection&rsquo; menu button:</p>

<p><img src="./images/cmis workbench on-premise connection.png?raw=true" alt="connection" />
</p>

<p>The three key items needed to make a connection to a repository host are:
* <strong>BINDING</strong> - the bindings (atompub, webservice, browser) are explained in detail in the cmis specification (the &lsquo;browser&rsquo; binding is the fullest and most lightweight implementation but not always available).</p>

<ul>
<li><p><strong>URL</strong> - the url is where the rubber hits the road for cmis on Alfresco, however it is a little tricky to understand just which url is needed as there are many to choose from depending on; what version of Alfresco is running, how the repository is deployed (i.e. on-premise, cloud, public), which binding is being used (atompub, webservice, browser) and whether connecting to the OpenCMIS API or to services or service information.  To keep this step readable the unravelling of this is in [[Spaghetti western: CMIS URL|Spaghetti western: CMIS URL]]<img src="/assets/img/spaghetti-western-10.png?raw=true" alt="icon" />
 (although the examples below have the answers anyway).</p></li>

<li><p><strong>AUTHENTICATION CREDENTIALS / METHOD</strong> - just like the url, we are spoilt for choice on what authentication methods and credentials may be used, and there is a proliferation of documentation to go along with that.  To keep things simple going to use the standard, non-https, user name and password for connecting to Alfresco on-premise and when connecting to Alfresco in the cloud, use the required oAuth implementation (how to do this is in the examples below).</p></li>
</ul>

<p>The &lsquo;basic&rsquo; tab provides, well, basic input boxes for these key parameters plus some performance tuning parameters (which <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a> explains in Part 3 - advanced topics).  The &lsquo;expert&rsquo; tab allows an expanded syntax of <a href="http://chemistry.apache.org/java/0.9.0/maven/apidocs/org/apache/chemistry/opencmis/commons/SessionParameter.html">OpenCMIS session parameters</a> to fine tune the <a href="http://chemistry.apache.org/java/0.9.0/maven/apidocs/constant-values.html#org.apache">values</a> that can be used.  The expert tab has a drop down of some preset connection parameters (such as Alfresco) to make things easier.</p>

<p>So, to connect to an Alfresco 4.2e, on-premise repository with the OpenCMIS browser binding use the following parameters:</p>

<pre><code>org.apache.chemistry.opencmis.binding.spi.type=browser
org.apache.chemistry.opencmis.binding.browser.url=http://[host]/alfresco/cmisbrowser
org.apache.chemistry.opencmis.user=&lt;user&gt;
org.apache.chemistry.opencmis.password=&lt;password&gt;
org.apache.chemistry.opencmis.binding.compression=true
org.apache.chemistry.opencmis.binding.cookies=true
</code></pre>

<p>Given only simple parameters were chosen in the on-premise example above, they could have also been entered in the basic tab for the same result.  Connecting to the Alfresco in the cloud repository requires the use of the expert tab though as it uses parameter values that cannot be set on the basic tab.</p>

<p>The example syntax below was generated by selecting &lsquo;Alfresco Cloud AtomPub&rsquo; from the parameter template drop down list at the top of the expert tab (at present it doesn&rsquo;t seem like the browser binding is available in the cloud repository). The value for the oAuth access token is obtained from an oAuth authentication flow which is described in [[Paint by numbers: Alfresco oAuth sample application|Paint by numbers: Alfresco oAuth sample application]]<img src="./images/paint-by-numbers-10.png?raw=true" alt="icon" />
:</p>

<pre><code># Alfresco Cloud (CMIS 1.0 AtomPub)
org.apache.chemistry.opencmis.binding.spi.type=atompub
org.apache.chemistry.opencmis.binding.atompub.url=https://api.alfresco.com/cmis/versions/1.0/atom
org.apache.chemistry.opencmis.binding.auth.http.basic=false

# Please provide a valid OAuth access token in the following property
# Note that Alfresco Cloud access tokens have a limited lifetime (currently 1 hour) and the OpenCMIS Workbench does not auto-refresh the access token when it expires
org.apache.chemistry.opencmis.binding.header.0=Authorization:Bearer ####ACCESS_TOKEN####

# Other optional options - compression etc. - may be provided here
</code></pre>

<p>Once all the relevant parameters are entered, pressing the &lsquo;load repositories&rsquo; button, presents a choice of instances on the host (as can run multiples), choose a repository from the drop down, press the login button and <a href="http://www.imdb.com/title/tt2379418/">voila!</a> you are into the default configuration of the CMIS Workbench user interface.</p>

<p>The CMIS Workbench can also be configured through <a href="http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html">system properties or additional properties</a> in the expert login dialog. An <a href="http://forums.alfresco.com/comment/75223#comment-75223">Alfresco forum post</a> explains this as:</p>

<blockquote>
<p>The CMIS Workbench, for example, makes use of the OperationContext. It sets up two OperationContext objects when it starts:<br />
* One OperationContext object is used for the folder list on left. This OperationContext only selects the data that is needed for this view: a handful of properties, no Allowable Actions, no ACLs, etc. That [as with paging] speeds up the retrieval of the list.<br />
* The second OperationContext is used to populate the right hand panels. It selects everything because it displays everything.</p>
</blockquote>

<p>The current values for the OperationContexts can be seen if press the Info button.  The notion of OperationContext is explained more fully in <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a> and the <a href="http://chemistry.apache.org/java/developing/guide.html">Apache OpenCMIS API docs</a>.</p>

<p>Once connected the features of the tool are available.</p>

<h3 id="toc_3">3. Browsing objects in the repository</h3>

<p>Browse the repository&rsquo;s objects, actions, properties, relationships, ACL, policies, versions, types and extensions:</p>

<p><img src="/assets/img/cmis-workbench-main.png?raw=true" alt="browse" />
</p>

<h3 id="toc_4">4. Querying the repository</h3>

<p>The CMIS query syntax is defined in detail in:<br />
* 2.1.14 Query of <a href="http://docs.oasis-open.org/cmis/CMIS/v1.1/CMIS-v1.1.pdf">Content Management Interoperability Services (CMIS) specification</a>
* <a href="http://wiki.alfresco.com/wiki/CMIS_Query_Language">Alfresco wiki</a>
* Chapter 5 - Query of <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a></p>

<p><img src="/assets/img/cmis-workbench-query.png?raw=true" alt="query" />
</p>

<h3 id="toc_5">5. CMIS Types</h3>

<p>The type function exposes the content model through the workbench:</p>

<p><img src="/assets/img/cmis-workbench-type.png?raw=true" alt="type" />
</p>

<p>The ability to create and update types allows programatic deployment of a content model eliminating the need for custom configuration scripts for the various repositories to configure types.</p>

<p>Chapter 4 - CMIS metadata: types and properties of <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a> describes how:</p>

<blockquote>
<p>OpenCMIS provides the TypeUtils class, which can read and write type definitions from and to XML and JSON.</p>
</blockquote>

<h3 id="toc_6">6. The groovy console</h3>

<p>The groovy console provides a quick and easy development environment to use the <a href="http://chemistry.apache.org/java/0.9.0/maven/apidocs/overview-summary.html">Apache Chemistry OpenCMIS API</a>:</p>

<p><img src="/assets/img/cmis-workbench-groovy.png?raw=true" alt="groovy" />
</p>

<p>In addition to the default API, <a href="http://www.manning.com/mueller">CMIS and Apache Chemistry in Action</a> highlights two other API&rsquo;s that can be accessed from the Groovy console:</p>

<p><em>Chapter 3: Part 3 Advanced Topics - low-level api</em>
&gt;
The APIs provide an object-oriented interface with a lot of convenience, simplified data structures, and high-level operations that don’t exist in CMIS. On the other hand, these APIs hide extension points and access to the data structures that are transferred over the wire.<br />
It turns out that there’s a layer between the bindings and these APIs called the low- level API. The low-level API provides a set of interfaces and operations that model all the services and operations in the CMIS specification one-to-one. For each of the nine CMIS services, there’s an interface. For each operation, there’s a method with exactly the same name and the same parameters, in the same order. The data objects are very close to the data structures used on the wire. The semantics and behavior are as described in the CMIS domain model. You can use the CMIS specification as a manual for these interfaces.
&gt;</p>

<p><em>Chapter 3: Creating, updating, and deleting objects with CMIS - groovy helper scripts</em>
&gt;
CMIS helper scripts distributed with the CMIS Workbench can make your Groovy code more succinct. What other shortcuts are available? If you take a look at the source code for the CMIS Workbench, you’ll find the Groovy file that defines the CMIS helper scripts in /src/main/resources/scripts/CMIS.groovy. Consult that file for the full list.
&gt;</p>

<p>The Florian Muller GitHub Repository workbench version ships with chapter scripts which can be accessed when use the Console button.  The apache project&rsquo;s version ships with other scripts that can be accessed from the Console button of that version.</p>

<p><strong>Note:</strong> if get the unauthorised error when accessing the cloud repository then the token has probably timed out - need to close the groovy console, regenerate an access token, reconnect with the new token and reopen the console.</p>

<p>For information on groovy:
* <a href="http://groovy.codehaus.org">Groovy home</a>
* <a href="http://groovy.codehaus.org/Documentation">documentation</a> including getting started and tutorials
* <a href="http://www.gradle.org">Gradle</a> build system for groovy</p>

<p>Some books on Groovy and CMIS (with source code):</p>

<p><html>
<table border="0">
<tr>
  <td>
    <p><a href="http://www.manning.com/mueller" target="_blank">
      <img src="./images/manning-cmis.png?raw=true" alt="book"></a>
    </p>
  </td>
  <td>
    <p><a href="http://www.manning.com/koenig2" target="_blank">
      <img src="./images/manning-groovy.png?raw=true" alt="book"></a>
    </p>
  </td>
  <td>
    <p><a href="http://www.packtpub.com/develop-applications-and-integrations-that-can-interact-with-cmis-alfresco/book" target="_blank">
      <img src="./images/pakt-cmis.png?raw=true" alt="book"></a>
    </p>
  </td>
  <td>
    <p><a href="http://www.packtpub.com/groovy-2-cookbook/book" target="_blank">
      <img src="./images/pakt-groovy.png?raw=true" alt="book"></a>
    </p>
  </td>
</tr>
</table>
</html></p>

<h3 id="toc_7">7. Advanced features</h3>

<p>Other features of CMIS Workbench are:<br />
* Repository info
* <a href="http://wiki.alfresco.com/wiki/CMIS#Change_Log">Change Logger</a>
* TCK (Test Compatibility Kit)
* CMIS Client Logging (filtered logging)</p>
</p>
            </div>            
        </div>
    </div>

	    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-6">                     
                    <p>
                        2014 &copy; Giubilo. All Rights Reserved. 
                          |  Powered by 
                        <a target="_blank" href="http://gohugo.io"><img src="/assets/img/hugo-favicon.png" alt="Hugo" title="Hugo"></a>  + 
                        <a target="_blank" href="http://getbootstrap.com"><img src="/assets/img/getbootstrap-favicon.png" alt="Bootstrap" title="Bootstrap"></a>
                    </p>
                </div>
                <div class="col-md-6">  
                    <a href="/">
                        <img class="pull-right" id="logo-footer" src="/assets/img/logo-default-39.png" alt="">
                    </a>
                </div>
            </div>
        </div> 
    </div>

</div>

           
<script type="text/javascript" src="/assets/plugins/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>

           
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/pages/index.js"></script>




<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>